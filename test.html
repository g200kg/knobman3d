<script type="text/javascript" src="LZWEncoder.js"></script> <script type="text/javascript" src="NeuQuant.js"></script> <script type="text/javascript" src="GIFEncoder.js"></script>

<script>

window.onload=function(){
  var img1 = new Image(), img2 = new Image();
  var canvas=document.getElementById("canvas");
  var context=canvas.getContext("2d");
  img1.src = "images/sample1.png";
  img2.src = "images/sample2.png";
  var encoder = new GIFEncoder();
  encoder.setRepeat(0);
  encoder.setDelay(500);
  encoder.start();
  console.log("start");
//.  context.drawImage(img1, 0, 0, canvas.width, canvas.height);
  context.fillStyle="#fff";
  context.fillRect(0,0,100,100);
  encoder.addFrame(context);
//  context.drawImage(img1, 0, 0, canvas.width, canvas.height);
context.fillStyle="#ff0";
context.fillRect(0,0,100,100);
  encoder.addFrame(context);
  encoder.finish();
  console.log("finish");
  var bin = new Uint8Array(encoder.stream().bin);
  var blob = new Blob([bin.buffer], { type:"image/gif"});
  var url = URL.createObjectURL(blob);
  image = document.getElementById("image");
  image.src = url;
  image.onload = function() {
    URL.revokeObjectURL(url);
  };
}
</script>
<body>
  <canvas id="canvas" width="100" height="100"></canvas>
  <img id="image"/>
</body>
